---
layout: post
title: "И целого мира мало"
date: 2012-03-06 10:21
comments: true
categories:
---

Как уже было сказано, клиенсткая часть Medal of Code - это NodeJS демон,
написанный (сюрприз!) на джаваскрипте. Уже в ходе первоначальной
разработки, прямо на Хакатоне, выяснилось, что в Джаваскрипте в
регулярных выражениях `.` не матчит символ конца строки. Флаг `m`, то
есть, multiline, внезапно не помогает - это в Руби флаг `m` фактически
означает "пусть точка матчит символ конца строки", а вот Джаваскрипт
подложил свинью.

Как же с этим быть?

Решение пришло неожиданно и из теории множеств. Оказывается, "украинцы и
не украины" - это больше, чем "все люди". Любой символьный класс плюс
его инвертирование ловит не все, а _все_ символы, включая и конец
строки. То есть, при работе с многострочными строками, в Джаваскрипте
надо писать не `.*`, а, к примеру, `[\d\D]*`, или `[\s\S]*`.

О сколько нам открытий дивных...
